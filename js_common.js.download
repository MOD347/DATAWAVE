function toggle_collapse_forum(objname,noimg,complex,lang){var obj=$(objname);if(obj){obj.style.display=obj.style.display==''?'none':'';var collapsed=getcookie('collapse');collapsed=updatestring(collapsed,objname,obj.style.display);setcookie('collapse',collapsed,(collapsed?2592000:-2592000));}if(!noimg){var img=$(objname+'_img');if(img.tagName!='IMG'){if(img.className.indexOf('_yes')==-1){img.className=img.className.replace(/_no/,'_yes');if(lang){img.innerHTML=lang[0];}}else{img.className=img.className.replace(/_yes/,'_no');if(lang){img.innerHTML=lang[1];}}}else{img.src=img.src.indexOf('_yes.gif')==-1?img.src.replace(/_no\.gif/,'_yes\.gif'):img.src.replace(/_yes\.gif/,'_no\.gif');}img.blur();}if(complex){var objc=$(objname+'_c');if(objc){objc.className=objc.className=='umh'?'umh umn':'umh';}}}function keyword(obj,id,url,keyCode){if(typeof stoplen=='undefined'){stoplen=0;valuelen=0;valuestr=0;stopaction=0;currentpos=-1;}if(/msie/i.test(navigator.userAgent)){obj.onpropertychange=function(){setTimeout("runkeyword('"+obj.id+"','"+id+"','"+url+"')",1);};}else{obj.oninput=function(){Timer=setTimeout("runkeyword('"+obj.id+"','"+id+"','"+url+"')",1);};obj.oninput();}for(i=0;i<20;i++){setTimeout("setpropertymouse('"+id+"')",i*200);}setTimeout("setpropertykeyboard('"+id+"','"+keyCode+"')",20);}function setpropertymouse(id){p=document.getElementById(id).getElementsByTagName('p');if(p['length']){for(i in p){p[i].onmouseover=function(i){return function(){if(currentpos>=0&&p[currentpos])p[currentpos].className='';currentpos=parseInt(i);sc_relate=this.innerHTML;this.className='on';}}(i);p[i].onmouseout=function(i){return function(){if(currentpos>=0&&p[currentpos])p[currentpos].className='';currentpos=-1;sc_relate='';this.className='';}}(i);}}}function setpropertykeyboard(id,keyCode){p=document.getElementById(id).getElementsByTagName('p');if(p['length']){if(keyCode==40){if(currentpos+1<p['length']){if(currentpos>=0&&p[currentpos])p[currentpos].className='';currentpos++;p[currentpos].className='on';obj.value=p[currentpos].innerHTML;stopaction=true;}}else if(keyCode==38){if(currentpos>0){if(currentpos>=0&&p[currentpos])p[currentpos].className='';currentpos--;obj.value=p[currentpos].innerHTML;p[currentpos].className='on';stopaction=true;}}else{currentpos=-1;stopaction=false;}}}function wordfilter(kw){m=new Array();r=new Array();m['a']=new Array("０","１","２","３","４","５","６","７","８","９");r['a']=new Array("0","1","2","3","4","5","6","7","8","9");m['b']=new Array("ａ","ｂ","ｃ","ｄ","ｅ","ｆ","ｇ","ｈ","ｉ","ｊ","ｋ","ｌ","ｍ","ｎ","ｏ","ｐ","ｑ","ｒ","ｓ","ｔ","ｕ","ｖ","ｗ","ｘ","ｙ","ｚ");r['b']=new Array("a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z");m['c']=new Array("Ａ","Ｂ","Ｃ","Ｄ","Ｅ","Ｆ","Ｇ","Ｈ","Ｉ","Ｊ","Ｋ","Ｌ","Ｍ","Ｎ","Ｏ","Ｐ","Ｑ","Ｒ","Ｓ","Ｔ","Ｕ","Ｖ","Ｗ","Ｘ","Ｙ","Ｚ");r['c']=new Array("A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z");m['d']=new Array("　");r['d']=new Array(" ");for(var i in m){len=m[i].length;for(var p=0;p<len;p++){reg=new RegExp(m[i][p],"g");kw=kw.replace(reg,r[i][p]);}}reg=new RegExp("^\\s*","g");kw=kw.replace(reg,"");reg=new RegExp("\\s{2,}","g");kw=kw.replace(reg," ");kw=kw.toLowerCase();return kw;}function runkeyword(obj_id,id,url){ret=false;obj=document.getElementById(obj_id);if(obj.value.substring(obj.value.length-1).charCodeAt(0)=='12288'||obj.value.substring(obj.value.length-1).charCodeAt(0)=='65343'){ret=true;}kw=wordfilter(obj.value);if(sc_tmp==kw)return;if(!kw){valuelen=valuestr=stoplen=0;document.getElementById(id).style.display='none';return;}if(stopaction||(kw.length==valuelen&&kw==valuestr)||(stoplen&&kw.length&&stoplen<=kw.length)){ret=true;}valuelen=kw.length;valuestr=kw;if(ret)return;TimeNow=new Date();url=url+'?kw='+encodeURIComponent(kw)+'&rand='+TimeNow.getHours();majax(id,url);}function majax(id,url){var xmlhttp;if(window.XMLHttpRequest){xmlhttp=new XMLHttpRequest();}else{xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");}xmlhttp.onreadystatechange=function(){if(xmlhttp.readyState==4&&xmlhttp.status==200){document.getElementById(id).style.display='';if(xmlhttp.responseText){stoplen=0;document.getElementById(id).innerHTML=xmlhttp.responseText;}else{stoplen=kw.length;if(kw.substring(kw.length-1).charCodeAt(0)!='32'){document.getElementById(id).style.display='none';}}}};xmlhttp.open("GET",url,true);xmlhttp.send();}function commonBox(id){window['e']=[];window[id]=[];window[id]['t']=getElementByClass(id,id+'_t');window[id]['c']=getElementByClass(id,id+'_c');for(i in window[id]['t']){writeEvent(id,i);}runEvent(id);}function runEvent(id){e[id+'num']=typeof(e[id+'num'])=='undefined'?0:e[id+'num'];window[id]['t'][e[id+'num']].onmouseover();if(++e[id+'num']>=window[id]['t'].length)e[id+'num']=0;startEvent(id);}function writeEvent(id,i){window[id]['t'][i].onmouseover=function(){if(e[id+'c']==null)e[id+'c']=window[id]['c'][0];e[id+'c'].style.display='none';e[id+'c']=window[id]['c'][i];window[id]['c'][i].style.display='block';if(e[id+'t']==null)e[id+'t']=window[id]['t'][0];e[id+'t'].className='';e[id+'t']=window[id]['t'][i];window[id]['t'][i].className='on';if(!empty(e[id+'to']))clearTimeout(e[id+'to']);var scrollTop=Math.max(document.documentElement.scrollTop,document.body.scrollTop);if(empty(window[id]['c'][i].id)&&(window[id]['c'][i].offsetTop-scrollTop<document.documentElement.clientHeight)&&((window[id]['c'][i].offsetTop+300)-scrollTop>0)){window[id]['c'][i].id='cid'+i;o=new lazyload();o.showImage();}};window[id]['t'][i].onmouseout=function(){startEvent(id);};window[id]['c'][i].onmouseover=function(){if(!empty(e[id+'to']))clearTimeout(e[id+'to']);};window[id]['c'][i].onmouseout=function(){startEvent(id);};}function startEvent(id){e[id+'to']=setTimeout("runEvent('"+id+"')",10000);}function getElementByClass(id,n){var e=[];var t=document.getElementById(id).getElementsByTagName("*");for(var i=0;i<t.length;i++){if(in_array(n,t[i].className.split(" ")))e[e.length]=t[i];}return e;}function in_array(v,a){if(is_array(a)){for(var i in a){if(v==a[i])return true;}}}function is_array(a){return typeof(a)=='object'&&(a instanceof Array);}function $(id){return!id?null:document.getElementById(id);}function empty(v){if(typeof(v)=='undefined'||v==null||!v)return true;}function cpcheck(id){var txt='';if(window.getSelection){txt=window.getSelection();}else if(document.getSelection){txt=document.getSelection();}else if(document.selection){txt=document.selection.createRange().text;}if(txt.toString().length>cp_max||!txt){document.getElementById(id).innerHTML="&nbsp;";window.location='forum.php?cpcheck';}}